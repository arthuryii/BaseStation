<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <link href="/assets/ligerUI/skins/Aqua/css/ligerui-all.css" rel="stylesheet" type="text/css" />
    <link href="/assets/ligerUI/skins/Gray/css/all.css" rel="stylesheet" type="text/css" />
    <script src="/assets/jquery-1.8.2.min.js" type="text/javascript"></script>
    <script src="/assets/ligerUI/js/core/base.js" type="text/javascript"></script>
    <script src="/assets/ligerUI/js/plugins/ligerForm.js" type="text/javascript"></script>
    <script src="/assets/ligerUI/js/plugins/ligerDateEditor.js" type="text/javascript"></script>
    <script src="/assets/ligerUI/js/plugins/ligerResizable.js" type="text/javascript"></script>
    <script src="/assets/ligerUI/js/plugins/ligerTree.js" type="text/javascript"></script>
    <script src="/assets/ligerUI/js/plugins/ligerComboBox.js" type="text/javascript"></script>
    <script src="/assets/ligerUI/js/plugins/ligerCheckBox.js" type="text/javascript"></script>
    <script src="/assets/ligerUI/js/plugins/ligerButton.js" type="text/javascript"></script>
    <script src="/assets/ligerUI/js/plugins/ligerDialog.js" type="text/javascript"></script>
    <script src="/assets/ligerUI/js/plugins/ligerRadio.js" type="text/javascript"></script>
    <script src="/assets/ligerUI/js/plugins/ligerSpinner.js" type="text/javascript"></script>
    <script src="/assets/ligerUI/js/plugins/ligerTextBox.js" type="text/javascript"></script>
    <script src="/assets/ligerUI/js/plugins/ligerTip.js" type="text/javascript"></script>
    <script src="/assets/ligerUI/js/plugins/ligerGrid.js" type="text/javascript"></script>
    <script src="/assets/ligerUI/js/plugins/ligerToolBar.js" type="text/javascript"></script>
    <script src="/assets/jquery-validation/jquery.validate.min.js" type="text/javascript"></script>
    <script src="/assets/jquery-validation/jquery.metadata.js" type="text/javascript"></script>
    <script src="/assets/jquery-validation/messages_cn.js" type="text/javascript"></script>
    <script src="/scripts/baseStations.js"></script>
    <script type="text/javascript">
    var eee;
    $(function () {
        var para = geturlpara(location.href);
        $.metadata.setType("attr", "validate");
        var v = $("form").validate({
            debug: true,
            errorPlacement: function (lable, element) {
                if (element.hasClass("l-textarea")) {
                    element.ligerTip({ content: lable.html(), target: element[0] });
                }
                else if (element.hasClass("l-text-field")) {
                    element.parent().ligerTip({ content: lable.html(), target: element[0] });
                }
                else {
                    lable.appendTo(element.parents("td:first").next("td"));
                }
            },
            success: function (lable) {
                lable.ligerHideTip();
                lable.remove();
            },
            submitHandler: function () {
                $.ligerDialog.warn("尚未实现");
                return;
                $("form .l-text,.l-textarea").ligerHideTip();
                //ajax
                var so = "ProjectName$" + $("#ProjectName").val() + "||" +
                    //"ProjectNo$" + $("#ProjectNo").val() + "||" +
                "Memo$" + $("#Memo").val();
                so = encodeURI(so);
                $.ajax({
                    url: "../Handler/ReqHandler.ashx?method=post&para=project@"+so,
                    type: "post",
                    success: function (result) {
                        var oresult = eval('(' + result + ')');
                        if (oresult.Code == "ok" && oresult.Result > 0) {
                            top.f_success("提交成功!");
                            //关闭父窗体 dialogue
                            closeparent();
                        }
                        else
                            top.f_warn("提交失败");
                    },
                    error: function () {
                        top.f_error("访问错误");
                    }
                });
            }
        });
        $("form").ligerForm();

        for (var i = 0; i < base_stations.length; i++) {
            if (para.id == base_stations[i].id) {
                $("#Id").val(base_stations[i].id);
                $("#Name").val(base_stations[i].name);
                $("#UpdateTime").val(base_stations[i].update_time);
                $("#LAC").val(base_stations[i].lac);
                $("#CI").val(base_stations[i].ci);
                $("#DirectionAngle").val(base_stations[i].direction_angle);
                $("#InclinationAngle").val(base_stations[i].inclination_angle);
                $("#Address").val(base_stations[i].address);
                $("#LNG").val(base_stations[i].lng);
                $("#LAT").val(base_stations[i].lat);
                break;
            }
        }
    });
    function closeparent() {
        if(parent.grid)
            parent.grid.reload();
        parent.editw.close();
    }

    </script>
    <style type="text/css">
        body {
            font-size: 12px;
            overflow: hidden;
        }

        .l-table-edit {
        }

        .l-table-edit-td {
            padding: 4px;
        }

        .l-button-submit, .l-button-test {
            width: 80px;
            float: left;
            margin-left: 10px;
            padding-bottom: 2px;
        }

        .l-verify-tip {
            left: 230px;
            top: 120px;
        }
    </style>
</head>
<body>
    <form name="form1" method="post" id="form1">
        <input type="hidden" id="Id" name="Id" />
        <table class="l-table-edit">
            <tr>
                <td align="right" class="l-table-edit-td">基站名称：</td>
                <td align="left" class="l-table-edit-td">
                    <input name="Name" type="text" id="Name" ltype="text" validate="{required:true}" />
                </td>
                <td align="left"></td>
            </tr>
            <tr>
                <td align="right" class="l-table-edit-td">LAC：</td>
                <td align="left" class="l-table-edit-td">
                    <input name="LAC" type="text" id="LAC" ltype="text" validate="{required:true}" />
                </td>
                <td align="left"></td>
            </tr>
            <tr>
                <td align="right" class="l-table-edit-td">CI：</td>
                <td align="left" class="l-table-edit-td">
                    <input name="CI" type="text" id="CI" ltype="text" validate="{required:true}" />
                </td>
                <td align="left"></td>
            </tr>
            <tr>
                <td align="right" class="l-table-edit-td">方位角：</td>
                <td align="left" class="l-table-edit-td">
                    <input name="DirectionAngle" type="text" id="DirectionAngle" ltype="text" validate="{required:true}" />
                </td>
                <td align="left"></td>
            </tr>
            <tr>
                <td align="right" class="l-table-edit-td">下倾角：</td>
                <td align="left" class="l-table-edit-td">
                    <input name="InclinationAngle" type="text" id="InclinationAngle" ltype="text" validate="{required:true}" />
                </td>
                <td align="left"></td>
            </tr>
            <tr>
                <td align="right" class="l-table-edit-td">经度：</td>
                <td align="left" class="l-table-edit-td">
                    <input name="LNG" type="text" id="LNG" ltype="text" validate="{required:true}" />
                </td>
                <td align="left"></td>
            </tr>
            <tr>
                <td align="right" class="l-table-edit-td">纬度：</td>
                <td align="left" class="l-table-edit-td">
                    <input name="LAT" type="text" id="LAT" ltype="text" validate="{required:true}" />
                </td>
                <td align="left"></td>
            </tr>
            <tr>
                <td align="right" class="l-table-edit-td">地址：</td>
                <td align="left" class="l-table-edit-td">
                    <input name="Address" type="text" id="Address" ltype="text" validate="{required:true}" />
                </td>
                <td align="left"></td>
            </tr>
        </table>
        <br />
        <input type="submit" value="提交" id="Button1" class="l-button l-button-submit" />
        <input type="button" value="取消" onclick="closeparent()" id="cancel" class="l-button l-button-cancel" />
    </form>
</body>
</html>