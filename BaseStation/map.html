<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=idGyaRICt0V9odGSz6iffcvR"></script>
    <script src="/scripts/baseStations.js"></script>
    <title>百度地图的Hello, World</title>
    <style type="text/css">
        body, html, #allmap {
            width: 100%;
            height: 100%;
            overflow: hidden;
            margin: 0;
        }
    </style>
</head>
<body>
    <div id="allmap"></div>
</body>
</html>
<script type="text/javascript">
    var myIcon = new BMap.Icon("/images/markers.png", new BMap.Size(24, 24), {
        offset: new BMap.Size(12, 24),
    });
    var sContent =
    "<h4 style='margin:0 0 5px 0;padding:0.2em 0'>[name]</h4>" +
    "<p style='margin:0;line-height:1.5;font-size:13px;text-indent:2em'>更新时刻：[update_time]</p>" +
    "</div>";
    // 百度地图API功能
    var map = new BMap.Map("allmap");            // 创建Map实例

    var centerPoint = new BMap.Point(120.438991, 36.144578)
    map.enableScrollWheelZoom();                            //启用滚轮放大缩小
    map.centerAndZoom(centerPoint, 15);

    for (var i = 0; i < base_stations.length; i++) {
        var content = sContent.replace("[name]", base_stations[i].name).replace("[update_time]", base_stations[i].update_time);
        var point = new BMap.Point(base_stations[i].lng, base_stations[i].lat);
        var marker = new BMap.Marker(point, { icon: myIcon });
        map.addOverlay(marker);
        marker.addEventListener("click", function () {
            var infoWindow = new BMap.InfoWindow(content);
            this.openInfoWindow(infoWindow);
        });
    }
</script>