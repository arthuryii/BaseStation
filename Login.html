<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta content="/BaseStation/content/images/logo.png" itemprop="image" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>登陆</title>
    <link href="/BaseStation/css/login.css" rel="stylesheet" />
    <link href="/BaseStation/assets/ligerUI/skins/Aqua/css/ligerui-dialog.css" rel="Stylesheet" />
    <link href="/BaseStation/assets/ligerUI/skins/Gray/css/dialog.css" rel="Stylesheet" />
    <script src="/BaseStation/assets/jquery-1.8.2.min.js" type="text/javascript"></script>
    <script src="/BaseStation/assets/ligerUI/js/core/base.js" type="text/javascript"></script>
    <script src="/BaseStation/assets/ligerUI/js/plugins/ligerForm.js" type="text/javascript"></script>
    <script src="/BaseStation/assets/ligerUI/js/plugins/ligerDialog.js" type="text/javascript"></script>
    <script src="/BaseStation/assets/ligerUI/js/plugins/ligerTextBox.js" type="text/javascript"></script>
    <script src="/BaseStation/assets/ligerUI/js/plugins/ligerTip.js" type="text/javascript"></script>
    <script src="/BaseStation/assets/ligerUI/js/plugins/ligerCheckBox.js" type="text/javascript"></script>
    <script src="/BaseStation/assets/jquery-validation/jquery.validate.min.js" type="text/javascript"></script>
    <script src="/BaseStation/assets/jquery-validation/jquery.metadata.js" type="text/javascript"></script>
    <script src="/BaseStation/assets/jquery-validation/messages_cn.js" type="text/javascript"></script>
    <style type="text/css">
        /* -----------------------
   *   验证 *
* ----------------------- */
        .l-validate-error {
            color: red;
        }

        .l-validate-warn {
            color: orange;
        }

        .l-verify-tip {
            padding: 0;
            margin: 0;
            position: absolute;
            display: block;
        }

        .l-verify-tip-corner {
            padding: 0;
            margin: 0;
            position: absolute;
            background: url('/BaseStation/assets/ligerUI/skins/Aqua/images/form/verify-corner.gif') no-repeat;
            width: 8px;
            line-height: 9px;
            height: 9px;
            overflow: hidden;
            top: 5px;
            left: 0px;
            z-index: 10001;
        }

        .l-verify-tip-content {
            margin: 0;
            position: absolute;
            left: 7px;
            top: 0px;
            border: 1px solid #FFC340;
            background: #FFFCC7;
            z-index: 10000;
            padding: 4px 8px;
            width: 100px;
            font-size: 12px;
        }

        .l-verify-tip {
            left: 230px;
            top: 120px;
        }
    </style>
    <script type="text/javascript">
        var eee;
        var submiting = false;
        $(function () {
            var rm = $("#RememberMe").ligerCheckBox();
            $.metadata.setType("attr", "validate");
            var v = $("form").validate({
                debug: true,
                errorPlacement: function (lable, element) {
                    if (element.hasClass("l-textarea")) {
                        element.ligerTip({ content: lable.html(), target: element[0] });
                    }
                    else if (element.hasClass("l-text-field")) {
                        element.parent().ligerTip({ content: lable.html(), target: element[0] });
                    }
                    else {
                        lable.appendTo(element.parents("td:first").next("td"));
                    }
                },
                success: function (lable) {
                    lable.ligerHideTip();
                    lable.remove();
                },
                submitHandler: function () {
                    $("form .l-text,.l-textarea").ligerHideTip();
                    location.replace('/BaseStation/index.html');
                    return;
                    //ajax访问
                    var o = { username: $("#username").val(), password: $("#password").val(), valcode: $("#val").val(), rememberme: rm.getValue() };
                    if (!submiting) {
                        submiting = true;
                        $.ajax({
                            url: "handler/LoginHandler.ashx",
                            data: { login: $.ligerui.toJSON(o) },
                            type: "post",
                            success: function (result) {
                                submiting = false;
                                if (result == 1) {
                                    $.ligerDialog.warn("验证码失效");
                                    return;
                                }
                                else if (result == 2) {
                                    $.ligerDialog.warn("验证码错误");
                                    return;
                                }
                                var oresult = eval('(' + result + ')');
                                if (oresult.Code == "ok" && oresult.Result == 0) {
                                    location.replace("index.html");
                                }
                                else {
                                    switch (oresult.Result) {
                                        case 1:
                                            $.ligerDialog.warn("密码错误！");
                                            break;
                                        case 2:
                                            $.ligerDialog.warn("用户名不存在！");
                                            break;
                                        default:
                                            $.ligerDialog.warn("登陆失败！");
                                            break;
                                    }
                                }
                            },
                            error: function () {
                                $.ligerDialog.error("访问错误");
                            }
                        });
                    }
                }
            });

            $("form").ligerForm();
            $("#val").ligerTextBox({ width: 80 });
        });

    </script>
</head>
<body>
    <form name="form1" method="post" id="form1" class="liger-form">
        <div id="login-box">

            <h2>登录</h2>
            基站管理平台
            <br />
            <br />

            <table cellpadding="0" cellspacing="0" class="l-table-edit" style="margin-left: 40px;">
                <tr>
                    <td align="right" class="l-table-edit-td">用户名：</td>
                    <td align="left" class="l-table-edit-td" colspan="2">
                        <input class="form-login" type="text" name="username" style="ime-mode:disabled;" id="username" ltype="text" validate="{required:true,minlength:3,maxlength:12}" /></td>
                    <td align="left"></td>
                </tr>
                <tr>
                    <td align="right" class="l-table-edit-td">密码：</td>
                    <td align="left" class="l-table-edit-td" colspan="2">
                        <input class="form-login" type="password" name="password" style="ime-mode:disabled;" id="password" ltype="text" validate="{required:true,minlength:6,maxlength:12}" /></td>
                    <td align="left"></td>
                </tr>
                <tr>
                    <td align="right" class="l-table-edit-td">验证码：</td>
                    <td align="left" class="l-table-edit-td">
                        <input class="form-login" type="text" name="val" id="val" style="ime-mode:disabled;" ltype="text" validate="{required:true}" />
                    </td>
                    <td align="left" class="l-table-edit-td">
                        <!--<img style="float: right;" src="/BaseStation/handler/valcode.aspx" onclick="this.src+='?'+Math.floor(Math.random()*10);" alt="看不清?点击刷新" width="90" height="30" />-->
                    </td>
                    <td align="left"></td>
                </tr>
            </table>

            <br class="clear" />
            <table border="0" style="margin-left: 70px;">
                <tr>
                    <td>
                        <input type="submit" value="登录" style="background: url(/BaseStation/images/login-btn.png) no-repeat; border: none; width: 103px; height: 42px; color: white; line-height: 40px; text-align: center; font-size: 18px; font-family: 微软雅黑" />
                    </td>
                    <td>
                        <input type="checkbox" id="RememberMe" name="RememberMe" /></td>
                    <td>自动登录</td>
                    <td><a href="/BaseStation/account/findpassword" style="color: orange">忘记密码</a></td>
                </tr>
            </table>

        </div>
    </form>
</body>
</html>
